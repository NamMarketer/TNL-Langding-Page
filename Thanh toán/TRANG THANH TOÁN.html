<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TNL Jewelry - Thanh toán</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link href="payment.css" rel="stylesheet">
</head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VGXR3HP0ZG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VGXR3HP0ZG');
</script>
<body>
    <div class="site-header">
        <a href="../index.html" class="logo">
            <img src="../images/logokonen.png" alt="TNL Jewelry Logo">
        </a>
    </div>

    <div class="checkout-layout">
        <form id="payment-form" novalidate> <div class="form-section">
                <h3 class="section-title"><span>Thông tin khách hàng</span></h3>
                <div class="form-group">
                    <label for="customer-name">Họ và tên</label>
                    <input type="text" id="customer-name" name="name" class="form-control"
                           required pattern="^[\p{L} ]+$" minlength="2"
                           title="Vui lòng nhập họ tên hợp lệ">
                    <div class="error-message" data-for="name"></div>
                </div>
                <div class="form-group">
                    <label for="customer-email">Email</label>
                    <input type="email" id="customer-email" name="email" class="form-control"
                           required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$">
                     <div class="error-message" data-for="email"></div>
                </div>
                <div class="form-group">
                    <label for="customer-phone">Số điện thoại</label>
                    <input type="tel" id="customer-phone" name="phone" class="form-control"
                           required pattern="^[0-9]{10,11}$" title="Số điện thoại gồm 10 hoặc 11 chữ số"> <div class="error-message" data-for="phone"></div>
                </div>
                <div class="form-group">
                    <label for="customer-address">Địa chỉ</label>
                    <textarea id="customer-address" name="address" class="form-control" rows="3" required></textarea>
                    <div class="error-message" data-for="address"></div>
                </div>
            </div>

            <div class="shipping-section">
                <h3 class="section-title"><span>Phương thức vận chuyển</span></h3>
                <div class="shipping-options">
                    <div class="shipping-option active" data-price="0">
                        <input type="radio" name="shippingMethod" value="standard" id="shipping-free" checked>
                        <label for="shipping-free">
                            <div class="shipping-option-content">
                                <div class="shipping-header">
                                    <i class="fas fa-truck"></i>
                                    <strong>Giao hàng tiêu chuẩn</strong>
                                </div>
                                <div class="shipping-price">Miễn phí</div>
                                <div class="shipping-info">
                                    <div class="delivery-time">
                                        <i class="fas fa-clock"></i> 3-5 ngày làm việc
                                    </div>
                                    <div class="shipping-features">
                                        <span><i class="fas fa-check"></i> Đóng gói cẩn thận</span>
                                        <span><i class="fas fa-check"></i> Theo dõi đơn hàng</span>
                                    </div>
                                </div>
                            </div>
                        </label>
                    </div>

                    <div class="shipping-option" data-price="50000">
                        <input type="radio" name="shippingMethod" value="express" id="shipping-express">
                        <label for="shipping-express">
                            <div class="shipping-option-content">
                                <div class="shipping-header">
                                    <i class="fas fa-shipping-fast"></i>
                                    <strong>Giao hàng nhanh</strong>
                                </div>
                                <div class="shipping-price">50.000₫</div>
                                <div class="shipping-info">
                                    <div class="delivery-time">
                                        <i class="fas fa-clock"></i> 1-2 ngày làm việc
                                    </div>
                                    <div class="shipping-features">
                                        <span><i class="fas fa-check"></i> Ưu tiên xử lý</span>
                                        <span><i class="fas fa-check"></i> Bảo hiểm hàng hóa</span>
                                    </div>
                                </div>
                            </div>
                        </label>
                    </div>

                    <div class="shipping-option" data-price="100000">
                        <input type="radio" name="shippingMethod" value="special" id="shipping-special">
                        <label for="shipping-special">
                            <div class="shipping-option-content">
                                <div class="shipping-header">
                                    <i class="fas fa-rocket"></i>
                                    <strong>Giao hàng đặc biệt</strong>
                                </div>
                                <div class="shipping-price">100.000₫</div>
                                <div class="shipping-info">
                                    <div class="delivery-time">
                                        <i class="fas fa-clock"></i> Trong ngày
                                    </div>
                                    <div class="shipping-features">
                                        <span><i class="fas fa-check"></i> Khu vực nội thành</span>
                                        <span><i class="fas fa-check"></i> Ưu tiên cao nhất</span>
                                    </div>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <div class="payment-section">
                <h3 class="section-title"><span>Phương thức thanh toán</span></h3>
                <div class="payment-methods">
                     <div class="payment-method" data-method="cod">
                         <input type="radio" name="paymentMethod" value="cod" id="payment-cod">
                         <label for="payment-cod">
                            <i class="fas fa-money-bill-wave fa-2x"></i>
                            <div>Thanh toán khi nhận hàng</div>
                         </label>
                    </div>
                    <div class="payment-method" data-method="bank">
                         <input type="radio" name="paymentMethod" value="bank" id="payment-bank">
                         <label for="payment-bank">
                            <i class="fas fa-university fa-2x"></i>
                            <div>Chuyển khoản ngân hàng</div>
                         </label>
                    </div>
                     </div>
            </div>

            <div id="bank-info-section" class="bank-info" style="display: none;">
                <h4>Thông tin chuyển khoản</h4>
                <p>Vui lòng chuyển khoản theo thông tin dưới đây. Đơn hàng của bạn sẽ được xử lý sau khi chúng tôi xác nhận thanh toán.</p>
                <p><strong>Ngân hàng:</strong> Vietcombank</p>
                <p><strong>Số tài khoản:</strong> <span id="bank-account-number">1234567890</span> <button type="button" class="copy-button" data-copy-target="#bank-account-number">Sao chép</button></p>
                <p><strong>Chủ tài khoản:</strong> CÔNG TY TNL JEWELRY</p>
                <p><strong>Chi nhánh:</strong> TP.HCM</p>
                <p><strong>Số tiền cần chuyển:</strong> <span id="transfer-amount" style="font-weight: bold; color: var(--primary-color);">0₫</span></p>
                <p><strong>Nội dung chuyển khoản:</strong> <span id="order-code" data-copy-target="#order-code" style="font-weight: bold; color: var(--secondary-color);"></span> <button type="button" class="copy-button" data-copy-target="#order-code">Sao chép</button></p>
                <p class="note" style="color: var(--error-color); font-size: 0.9em; margin-top: 10px;">* Vui lòng ghi đúng nội dung chuyển khoản để đơn hàng được xử lý nhanh nhất. Đơn hàng chuyển khoản không được xác nhận tự động ngay lập tức.</p>
                <div class="qr-code-section">
                    <img src="../images/qr-payment.png" alt="QR Code Thanh Toán Vietcombank">
                    <p>Quét mã QR để thanh toán (Đảm bảo nhập đúng nội dung chuyển khoản)</p>
                </div>
            </div>

            <div class="order-summary">
                <h3 class="section-title"><span>Đơn hàng của bạn</span></h3>
                <div id="checkout-products">
                    </div>
                <div class="summary-details">
                    <div class="summary-line">
                        <span>Tạm tính:</span>
                        <span id="subtotal">0₫</span>
                    </div>
                    <div class="summary-line">
                        <span>Phí vận chuyển:</span>
                        <span id="shipping-cost">0₫</span>
                    </div>
                    <div class="summary-line" id="discount-line" style="display: none;">
                        <span>Giảm giá:</span>
                        <span id="discount-amount">-0₫</span>
                    </div>
                    <hr> <div class="summary-line total-line">
                        <span>Tổng tiền thanh toán:</span>
                        <span id="total" class="total-amount">0₫</span>
                    </div>
                </div>
            </div>

            <div class="discount-section">
                <h4>Mã giảm giá</h4>
                <div class="discount-input">
                    <input type="text" id="discount-code" placeholder="Nhập mã giảm giá">
                    <button id="apply-discount" type="button" class="btn-secondary">Áp dụng</button> </div>
                <div id="discount-message" class="note"></div> </div>

            <button type="submit" class="btn-checkout" id="submit-order-button">
                <span>Xác nhận đặt hàng</span>
            </button>
        </form>
    </div>

    <div id="success-popup" class="success-popup-container" style="display: none;">
        <div class="success-popup-content">
            <div class="success-header">
                <i class="fas fa-check-circle success-icon"></i>
                <h3>Đặt Hàng Thành Công!</h3>
                <p class="thank-you-message">Cảm ơn quý khách đã tin tưởng TNL Jewelry</p>
            </div>

            <div class="order-info">
                <div class="info-row">
                    <i class="fas fa-hashtag"></i>
                    <div class="info-content">
                        <span>Mã đơn hàng</span>
                        <strong id="popup-order-code"></strong>
                    </div>
                </div>
                <div class="info-row">
                    <i class="fas fa-paper-plane"></i>
                    <div class="info-content">
                        <span>Email xác nhận</span>
                        <strong id="popup-customer-email"></strong>
                    </div>
                </div>
                <div class="info-row">
                    <i class="fas fa-box-check"></i>
                    <div class="info-content">
                        <span>Trạng thái</span>
                        <strong class="status">Đã xác nhận</strong>
                    </div>
                </div>
            </div>

            <div class="notice">
                <i class="fas fa-info-circle"></i>
                <p>Thông tin đơn hàng đã được gửi tới email của bạn</p>
            </div>

            <div class="redirect-note">
                <div class="progress-bar">
                    <div class="progress"></div>
                </div>
                <p>Tự động chuyển về trang chủ sau <span id="countdown">5</span>s</p>
            </div>

            <button type="button" class="btn-continue">
                <i class="fas fa-home"></i>
                Về trang chủ ngay
            </button>
        </div>
    </div>

    <script src="checkout.js"></script>
</body>
</html>
